[language-server.ltex-ls]
command = "ltex-ls"
config = { ltex = { language = "en-GB" } }

[[language]]
name = "markdown"
language-servers = [ "ltex-ls" ]
file-types = ["md"]
scope = "source.markdown"
roots = []
formatter = { command = 'prettier', args = ["--parser", "markdown"] }
auto-format = true

[[language]]
name = "git-commit"
scope = "git.commitmsg"
roots = []
file-types = ["COMMIT_EDITMSG"]
comment-token = "#"
indent = { tab-width = 2, unit = "  " }
rulers = [51, 73]
text-width = 72
language-servers = [ "ltex-ls" ]

[language-server.pyright]
command = "pyright-langserver"
args = ["--stdio"]
# pyright will get "Async jobs timed out" errors if this empty config is not added
config = {}

[language-server.ruff]
command = "ruff-lsp"

[[language]]
name = "python"
language-servers = ["pyright", "ruff"]
formatter = { command = "black", args = ["--quiet", "-"] }
auto-format = true

[language-server.typst-lsp]
command = "typst-lsp"

[[language]]
name = "typst"
scope = "source.typst"
injection-regex = "typst"
file-types = ["typst", "typ"]
roots = []
comment-token = "//"
language-servers = ["typst-lsp"]
indent = { tab-width = 2, unit = "  " }

[language.auto-pairs]
'(' = ')'
'{' = '}'
'[' = ']'
'$' = '$'
'"' = '"'

[[grammar]]
name = "typst"
source = { git = "https://github.com/uben0/tree-sitter-typst", rev = "e35aa22395fdde82bbc4b5700c324ce346dfc9e5" }

[[language]]
name = "nix"
scope = "source.nix"
injection-regex = "nix"
file-types = ["nix"]
comment-token = "#"
language-servers = ["nil"]
indent = { tab-width = 2, unit = "  " }
auto-format = true
formatter = { command = "alejandra", args = ["-q"] }
